![alt tag](https://github.com/BaggeRob/Fin-der/blob/master/logo.png)
# Fin-der User Guide
This project was part of a solution during Fishackaton 2016. The solution in its whole consists of 3 parts
- An app to help government agents, other inspectors, distributors and others in there process to audit fish fillets.
- A backend solution based on [Elastic Cloud](https://cloud.elastic.co)
- An analytics platform where a user can interact with the live dataset

![alt tag](https://github.com/BaggeRob/Fin-der/blob/master/fin-der-solution-and-roadmap.png)

## Analytics Platform
This GitHub project includes the analytics part of the solution and features scripts to generate data in to Elasticsearch as well as a definition of a live example dashboard that is aimed to let a regulatory body in its daily work to track Passed and Failed audits/inspections. The dashboard give information about:
- Where the Inspection/Audit was carried out
- How Inspection/Audit results has changed over the last 30 days
- Who has been Inspected/Audited recently and how many of these they have passed

### The Dashboard can be reached here [Fin-der interactive dashboard](https://c0746c228e7c9263ac770c7b3343112a.eu-west-1.aws.found.io/app/kibana#/dashboard/fish?_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-30d,mode:quick,to:now))&_a=(filters:!(),options:(darkTheme:!f),panels:!((col:7,id:Number-of-Inspections-Passed-slash-Failed,panelIndex:6,row:1,size_x:6,size_y:4,type:visualization),(col:1,id:'Number-of-inspections-carried-out-in-an-area-(Darker-colour-equal-Higher-density)',panelIndex:7,row:1,size_x:6,size_y:5,type:visualization),(col:7,id:Number-of-Passed-slash-Failed-Inspection-per-Supplier,panelIndex:9,row:5,size_x:6,size_y:4,type:visualization),(col:1,id:'Number-of-Passed-slash-Failed-Inspections-over-Time-(Passed-in-Blue,-Failed-in-Red)',panelIndex:10,row:6,size_x:6,size_y:3,type:visualization)),query:(query_string:(analyze_wildcard:!t,query:'*')),title:fish,uiState:(P-6:(vis:(colors:(failedinspection:%23EA6460,passedinspection:%231F78C1),legendOpen:!f)),P-9:(vis:(legendOpen:!f)))))

Login with the following credentials:

username: finder_dashboard

password: finder_dashboard

### Dashboard User Guide
When entering the platform you will be presented with the following visualisations

![alt tag](https://github.com/BaggeRob/Fin-der/blob/master/dashboard.png)

Where
- The top left visualisation can be used to drill down on geographic areas where audits/inspections have been carried out over the last 30 days
- The bottom left visualisation shows how many audits/inspections that was passed/failed over the last 30 days
- The top right visualisation shows total number of passed and failed audits/inspections
- The bottom right visualisation shows who has been targeted by inspections/audits and how they went.

All visualisations are interactive and you can filter what data that shows on the dashboard by clicking on the graphs. For example in the image below that has been filtered to only show failed inspections by clicking on the fail bar in the top right visualisation

![alt tag](https://github.com/BaggeRob/Fin-der/blob/master/dashboard-filter-fail.png)



## Backend Platform with autogenerated data and your own Analytics Platform
### Setup
To make full use of this code you will need an Elasticsearch cluster with the Kibana plugin enabled.

1. Go to cloud.elastic.com
2. Create an account through starting a trial
3. Log on to your account and create a cluster
4. Configure the shield plugin through adding an admin user and then saving
5. Enable the Kibana plugin in the configuration
6. Clone this repository


### Data generation
Disclaimer: To do this step you will need node installed on your computer

Open the project and run

```
npm install
```

After that the data generation scripts can be run with the following command

```
node generate-data-and-store-in-elasticsearch.es6 <elasticcloudEndpoint> <username> <password>
```

For example:

```
node generate-data-and-store-in-elasticsearch.es6 aafsf2.eu-west-1.aws.found.io:9243 <username> <password>
```

where the <elasticcloudEndpoint> can be found in 'Overview' in your Elastic Cloud account and the username/password combination is what you created earlier in the setup-phase

### Visualisation

1. Open Kibana
2. Go to Settings and enable indexing of the index 'fish'
3. Open the tab object and click Import
4. Import the json file kibana-dashboard-definition.json
5. After opening Dashboard and the file 'fish' you should now see visualisation for the time frame you have selected in the top right corner of the screen.
